<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad Modules Classes module:Controller module:ControllerPlugin Events @midgar/controller:afterLoadRoute afterLoad event. @midgar/controller:beforeCallRoute beforeCallRoute event. @midgar/controller:beforeLoad beforeLoadRoute event. × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-29T21:54:31+00:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad @midgar/controller Plugin Midgar pour la gestion des controllers Installation $ npm i @midgar/controller --save Si tout c'est bien passé, un message de confirmation apparet: #midgar-cli @midgar/controller added to plugins.js ! Fonctionnement Ce plugin ajoute un dossier de plugin midgar-controllers: ./controllers/ Il suffie d'ajouter un controller dans le dossier ./controller de votre plugin et il est automatiquement chargé au lancement de l'application. Structure d'un controller import { Controller } from '@midgar/controller' // Export export default { // Tableau de service a injécter // @see: https://www.npmjs.com/package/@midgar/service dependencies: [ 'midgar:user' ], // Class du contoller controller: class userController extends Controller { // Les dépendances sont injécté dans le contructeur constructor (mid, userService) { super(mid) this.prefix = 'user' this.userService = userService } /** * Cette method rencoi un tableau contenant les routes * @protected */ getRoutes() { return [ // Route /user/login { path: '/login', action: 'login' }, // Route /user/register { type: 'post' // si le type n'est pas specifié, get est utilisé path: '/register', action: 'register' } ] } /** * Login action */ login (req, res) { /** * La fonction getParm est ajout a l'object Request d'express * Cette fonction nétoie les paramète post et get d'eventuel code html * en appliquant un htmencode */ if (this.userService.login(req.getParam('login'), req.getParam('password', false))) { res.send({ success: true }) } else { res.send({ success: false }) } } /** * Register action */ register (req, res) { res.send({ success: true }) } } } × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-29T21:54:31+00:00 using the DocStrap template. "},"module-ControllerPlugin.html":{"id":"module-ControllerPlugin.html","title":"Module: ControllerPlugin","body":" Documentation Modules ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad Module: ControllerPlugin Midgar Controller plugin new (require(\"ControllerPlugin\"))() Members dirKey :String Routes dir key for plugin manager Type: String Methods &lt;async&gt; _loadClass(Class, args) Create controller instance init it and load routes Parameters: Name Type Description Class constructor Controller constructor args Array Constructor ags &lt;async&gt; init() Init plugins Define controllers directory and bind event Events @midgar/controller:afterLoadRoute afterLoad event. @midgar/controller:beforeCallRoute beforeCallRoute event. @midgar/controller:beforeLoad beforeLoadRoute event. × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-29T21:54:31+00:00 using the DocStrap template. "},"module-Controller.html":{"id":"module-Controller.html","title":"Module: Controller","body":" Documentation Modules ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad Module: Controller Controller Class &lt;abstract&gt; new (require(\"Controller\"))(mid) Parameters: Name Type Description mid Midgar Midgar instance Members mid :Midgar Midgar instance Type: Midgar prefix :String|null Routes prefix Type: String | null Methods &lt;async&gt; beforeCallRoute(route, req, res) Before call route hook Parameters: Name Type Description route * req Request Express request object res Response Express responde object &lt;async&gt; getRoutes() Return route definitions Returns: Type Array &lt;async&gt; init() Init hook &lt;async&gt; isAllow() Return if the routes in controller are allowed Used for check route permission Returns: Type Boolean × Search results Close Documentation generated by JSDoc 3.6.3 on 2019-12-29T21:54:31+00:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
