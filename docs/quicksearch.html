<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad Classes Classes Controller ControllerPlugin Events @midgar/controller:afterLoadRoute afterLoad event. @midgar/controller:beforeCallRoute beforeCallRoute event. @midgar/controller:beforeLoad beforeLoadRoute event. × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-19T19:04:00+00:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad @midgar/controller Plugin Midgar pour la gestion des controllers Installation $ npm i @midgar/controller Si tout s'est bien passé, un message de confirmation s'affiche: #midgar-cli @midgar/controller added to plugins.json ! Fonctionnement Ce plugin ajoute un type de module midgar-controller dans le dossier ./controllers/ Il suffit d'ajouter un controller dans le dossier ./controllers de votre plugin pour qu'il soit automatiquement importé au lancement de l'application et injecté dans express. Exemple de controller import { Controller } from '@midgar/controller' // Tableau de service a injécter // @see: https://github.com/midgarjs/service const dependencies = [ 'midgar:user' ] class UserController extends Controller { // Les dépendances sont injécté dans le contructeur constructor (mid, userService) { super(mid) this.prefix = 'user' this.userService = userService } /** * Cette méthod est appelé automatiquement * lors de l'instanciation du controller. */ init () { this.addRoutes([ { path: 'login', action: (...args) =&gt; this.login(...args) }, { method: 'post', path: 'login', action: (...args) =&gt; this.loginPost(...args) }, { path: 'register', action: (...args) =&gt; this.register(...args) }, { path: '/', action: (...args) =&gt; this.users(...args) } ]) } // GET /user/login route async login (req, res) { if (await this.userService.login(req.getParam('login'), req.getParam('password', false))) { res.send({ success: true }) } else { res.send({ success: false }) } } // POST /user/login route loginPost (req, res) {} // GET /user/register route register (req, res) {} // GET /user route user (req, res) {} } export default { dependencies controller: UserController } Les methodes terminant par Route, GetRoute, PostRoute, AllRoute sont automatiquement transformer en routes. × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-19T19:04:00+00:00 using the DocStrap template. "},"Controller.html":{"id":"Controller.html","title":"Class: Controller","body":" Documentation Classes ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad Class: Controller Controller Controller Class &lt;abstract&gt; new Controller(mid) Parameters: Name Type Description mid Midgar Midgar instance Members mid :Midgar Midgar instance Type: Midgar prefix :String|null Routes prefix Type: String | null routes :Array Routes array Type: Array Methods &lt;async&gt; beforeCallRoute(route, req, res) Before call route hook Parameters: Name Type Description route * req Request Express request object res Response Express responde object &lt;async&gt; init() Init hook &lt;async&gt; isAllow() Return if the routes in controller are allowed Used for check route permission Returns: Type boolean × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-19T19:04:00+00:00 using the DocStrap template. "},"ControllerPlugin.html":{"id":"ControllerPlugin.html","title":"Class: ControllerPlugin","body":" Documentation Classes ControllerControllerPlugin Events event:@midgar/controller:afterLoadRouteevent:@midgar/controller:beforeCallRouteevent:@midgar/controller:beforeLoad Class: ControllerPlugin ControllerPlugin Controller plugin class new ControllerPlugin() Members app :Express|null Express app Type: Express | null moduleTypeKey :string Controllers module type key Type: string Methods &lt;async&gt; _loadClass(Class, args) Create controller instance init it and load routes Parameters: Name Type Description Class constructor Controller constructor args Array Constructor ags &lt;async&gt; init() Init plugins Define controllers directory and bind event × Search results Close Documentation generated by JSDoc 3.6.3 on 2020-01-19T19:04:00+00:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
